{"Version": "2020-12-01", "Metadata": {}, "Parameters": [], "PipelineExperimentConfig": {"ExperimentName": {"Get": "Execution.PipelineName"}, "TrialName": {"Get": "Execution.PipelineExecutionId"}}, "Steps": [{"Name": "PreprocessStep", "Type": "Processing", "Arguments": {"ProcessingResources": {"ClusterConfig": {"InstanceType": "ml.m5.large", "InstanceCount": 1, "VolumeSizeInGB": 30}}, "AppSpecification": {"ImageUri": "366743142698.dkr.ecr.ap-northeast-2.amazonaws.com/sagemaker-scikit-learn:1.0-1-cpu-py3", "ContainerEntrypoint": ["python3", "/opt/ml/processing/input/code/preprocessing.py"]}, "RoleArn": "arn:aws:iam::381492026475:role/finguard-sagemaker-job-role", "ProcessingInputs": [{"InputName": "input-1", "AppManaged": false, "S3Input": {"S3Uri": "s3://finguard-model-artifacts/data/finguard_transdata.csv", "LocalPath": "/opt/ml/processing/input", "S3DataType": "S3Prefix", "S3InputMode": "File", "S3DataDistributionType": "FullyReplicated", "S3CompressionType": "None"}}, {"InputName": "code", "AppManaged": false, "S3Input": {"S3Uri": "s3://finguard-model-artifacts/sagemaker-scikit-learn-2025-08-20-05-38-59-653/input/code/preprocessing.py", "LocalPath": "/opt/ml/processing/input/code", "S3DataType": "S3Prefix", "S3InputMode": "File", "S3DataDistributionType": "FullyReplicated", "S3CompressionType": "None"}}], "ProcessingOutputConfig": {"Outputs": [{"OutputName": "train", "AppManaged": false, "S3Output": {"S3Uri": {"Std:Join": {"On": "/", "Values": ["s3:/", "finguard-model-artifacts", "FraudDetectionXGBPipeline", {"Get": "Execution.PipelineExecutionId"}, "PreprocessStep", "output", "train"]}}, "LocalPath": "/opt/ml/processing/train", "S3UploadMode": "EndOfJob"}}, {"OutputName": "test", "AppManaged": false, "S3Output": {"S3Uri": {"Std:Join": {"On": "/", "Values": ["s3:/", "finguard-model-artifacts", "FraudDetectionXGBPipeline", {"Get": "Execution.PipelineExecutionId"}, "PreprocessStep", "output", "test"]}}, "LocalPath": "/opt/ml/processing/test", "S3UploadMode": "EndOfJob"}}]}}}, {"Name": "XGBoostTrainStep", "Type": "Training", "Arguments": {"AlgorithmSpecification": {"TrainingInputMode": "File", "TrainingImage": "366743142698.dkr.ecr.ap-northeast-2.amazonaws.com/sagemaker-xgboost:1.5-1"}, "OutputDataConfig": {"S3OutputPath": "s3://finguard-model-artifacts/model"}, "StoppingCondition": {"MaxRuntimeInSeconds": 86400}, "ResourceConfig": {"VolumeSizeInGB": 30, "InstanceCount": 1, "InstanceType": "ml.m5.large"}, "RoleArn": "arn:aws:iam::381492026475:role/finguard-sagemaker-job-role", "InputDataConfig": [{"DataSource": {"S3DataSource": {"S3DataType": "S3Prefix", "S3Uri": {"Get": "Steps.PreprocessStep.ProcessingOutputConfig.Outputs['train'].S3Output.S3Uri"}, "S3DataDistributionType": "FullyReplicated"}}, "ContentType": "text/csv", "ChannelName": "train"}], "HyperParameters": {"objective": "binary:logistic", "eval_metric": "auc", "num_round": "100"}, "DebugHookConfig": {"S3OutputPath": "s3://finguard-model-artifacts/model", "CollectionConfigurations": []}, "ProfilerConfig": {"S3OutputPath": "s3://finguard-model-artifacts/model", "DisableProfiler": false}}}, {"Name": "EvaluateStep", "Type": "Processing", "Arguments": {"ProcessingResources": {"ClusterConfig": {"InstanceType": "ml.m5.large", "InstanceCount": 1, "VolumeSizeInGB": 30}}, "AppSpecification": {"ImageUri": "366743142698.dkr.ecr.ap-northeast-2.amazonaws.com/sagemaker-xgboost:1.5-1", "ContainerEntrypoint": ["python3", "/opt/ml/processing/input/code/evaluation.py"]}, "RoleArn": "arn:aws:iam::381492026475:role/finguard-sagemaker-job-role", "ProcessingInputs": [{"InputName": "input-1", "AppManaged": false, "S3Input": {"S3Uri": {"Get": "Steps.XGBoostTrainStep.ModelArtifacts.S3ModelArtifacts"}, "LocalPath": "/opt/ml/processing/model", "S3DataType": "S3Prefix", "S3InputMode": "File", "S3DataDistributionType": "FullyReplicated", "S3CompressionType": "None"}}, {"InputName": "input-2", "AppManaged": false, "S3Input": {"S3Uri": {"Get": "Steps.PreprocessStep.ProcessingOutputConfig.Outputs['test'].S3Output.S3Uri"}, "LocalPath": "/opt/ml/processing/test", "S3DataType": "S3Prefix", "S3InputMode": "File", "S3DataDistributionType": "FullyReplicated", "S3CompressionType": "None"}}, {"InputName": "code", "AppManaged": false, "S3Input": {"S3Uri": "s3://finguard-model-artifacts/sagemaker-xgboost-2025-08-20-05-38-59-963/input/code/evaluation.py", "LocalPath": "/opt/ml/processing/input/code", "S3DataType": "S3Prefix", "S3InputMode": "File", "S3DataDistributionType": "FullyReplicated", "S3CompressionType": "None"}}], "ProcessingOutputConfig": {"Outputs": [{"OutputName": "evaluation", "AppManaged": false, "S3Output": {"S3Uri": {"Std:Join": {"On": "/", "Values": ["s3:/", "finguard-model-artifacts", "FraudDetectionXGBPipeline", {"Get": "Execution.PipelineExecutionId"}, "EvaluateStep", "output", "evaluation"]}}, "LocalPath": "/opt/ml/processing/evaluation", "S3UploadMode": "EndOfJob"}}]}}, "PropertyFiles": [{"PropertyFileName": "EvaluationReport", "OutputName": "evaluation", "FilePath": "evaluation.json"}]}, {"Name": "GetPreviousModelAUC", "Type": "Lambda", "Arguments": {}, "FunctionArn": "arn:aws:lambda:ap-northeast-2:381492026475:function:get-previous-model-auc", "OutputParameters": [{"OutputName": "previous_auc", "OutputType": "Float"}]}, {"Name": "CheckAUC", "Type": "Condition", "Arguments": {"Conditions": [{"Type": "GreaterThan", "LeftValue": {"Std:JsonGet": {"PropertyFile": {"Get": "Steps.EvaluateStep.PropertyFiles.EvaluationReport"}, "Path": "metrics.auc"}}, "RightValue": {"Get": "Steps.GetPreviousModelAUC.OutputParameters['previous_auc']"}}], "IfSteps": [{"Name": "RegisterXGBModel-RegisterModel", "Type": "RegisterModel", "Arguments": {"ModelPackageGroupName": "FraudDetectionXGBGroup", "ModelMetrics": {"ModelQuality": {"Statistics": {"ContentType": "application/json", "S3Uri": {"Get": "Steps.EvaluateStep.ProcessingOutputConfig.Outputs['evaluation'].S3Output.S3Uri"}}}, "Bias": {}, "Explainability": {}}, "InferenceSpecification": {"Containers": [{"Image": "381492026475.dkr.ecr.ap-northeast-2.amazonaws.com/finguard/pipeline-serving", "Environment": {}, "ModelDataUrl": {"Get": "Steps.XGBoostTrainStep.ModelArtifacts.S3ModelArtifacts"}}], "SupportedContentTypes": ["text/csv"], "SupportedResponseMIMETypes": ["text/csv"]}, "ModelApprovalStatus": "Approved", "SkipModelValidation": "None"}}], "ElseSteps": []}}]}